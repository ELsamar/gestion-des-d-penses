<div class="container-fluid">
  <div class="content row">
    <nav class="navbar container-fluid">
      <div class="dropdown">
        <button class="dropdown-toggle nav-item" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          {{typeaffich}}
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" href="#" >toutes les depences</a>
          <a class="dropdown-item" href="#">depences recurantes</a>
          <a class="dropdown-item" href="#">depences  models </a>
        </div>
      </div>
      <form class="form-inline nav-item">
        <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
      </form>
      <button routerLink="listdep/formulaire" class="btn btn-sm btn-outline-secondary nav-item ">
        ajouter

      </button>

    </nav>
    <div class="card">
      <div class="container-fluid">
        <div class="table-responsive">
          <table class="table table-sm table-hover table table-striped ">
          <thead>
            <tr>
              <th scope="col">Titre</th>
              <th scope="col">Date</th>
              <th scope="col">Montant</th>
              <th scope="col">Cathégorie</th>
            </tr>
          </thead>
          <tbody>
              <tr *ngFor="let Depenses of depenseslist">
                  <td>{{Depenses.titredepense}}</td>
                  <td>{{Depenses.datedepense}}</td>
                  <td>{{Depenses.montantdepense}}</td>
                  <td>{{Depenses.cathegoriedepense}}</td>
                  <td>
                    <a (click)="openWindowCustomClass(content,Depenses)"><i class="far fa-edit"></i></a>
                    <a class="btn btn-danger" (click)="onDelete(Depenses.$key)">
                      <i class="fas fa-trash-alt"></i>
                    </a>
                  </td>
              </tr>
          </tbody>
    </table>
  </div>

        <ng-template #content let-c="close" let-d="dismiss">
          <div class="modal-header">
            <h4 class="modal-title">update</h4>
            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form  #depensesForm="ngForm" (ngSubmit)="onsubmit(depensesForm)">
              <input type="hidden" name="$iddepense" #iddepense  ngModel [(ngModel)]="depenseservice.selectedDepense.$key">

              <div class="container-fluid">
                <div class=" content row">
                  <div class="card">
                    <div class="container-fluid">
                      <h3 class="col-10"></h3>
                      <div class="col-2">
                        <div class="form-group">
                          <select class="custom-select mr-sm-2 btn btn-primary" id="selectdepense">
                            <option *ngFor = "let typedep of typedeps" [value]="typedep">{{typedep}}</option>
                          </select>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-form-label">Titre:</label>
                        <input type="text" class="form-control" name="titredepense" #titredepense="ngModel" [(ngModel)]="depenseservice.selectedDepense.titredepense" required minlength="4">
                        <div *ngIf ="titredepense.errors && (titredepense.dirty|| titredepense.touched)" class ="alert alert-danger"  >
                          <div [hidden] = "!titredepense.errors.required">
                            <strong>Error:</strong>Ce champs est obligatoire
                          </div>
                          <div [hidden] = "!titredepense.errors.minlength">
                            <strong>Error:</strong>Ce champs est trés cours
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="col-form-label">Montant :</label>
                          <div class="input-group">
                            <input type="text" class="form-control" placeholder="0000.0000" name="montantdepense" #montantdepense="ngModel" [(ngModel)]="depenseservice.selectedDepense.montantdepense" pattern= "\d*" required>
                            <div class="input-group-prepend">
                              <div class="input-group-text">TND</div>
                            </div>
                            <div *ngIf ="montantdepense.errors && (montantdepense.dirty|| montantdepense.touched)" class ="alert alert-danger"  >
                              <div [hidden] = "!montantdepense.errors.required">
                                <strong>Error:</strong>Ce champs est obligatoire
                              </div>
                              <div [hidden] = "!montantdepense.errors.pattern">
                                <strong>Error:</strong>le montant doit étre nombre
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="col-form-label">Date :</label>
                          <input type="date" class="form-control" name="datedepense" #datedepense="ngModel" [(ngModel)]="depenseservice.selectedDepense.datedepense " pattern="(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))" required  />
                          <div *ngIf ="datedepense.errors && (datedepense.dirty|| datedepense.touched)" class ="alert alert-danger"  >
                            <div [hidden] = "!datedepense.errors.required">
                              <strong>Error:</strong>Ce champs est obligatoire
                            </div>
                            <div [hidden] = "!datedepense.errors.pattern">
                              <strong>Error:</strong>Veuillez inserrez une date correcte
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <label for="Cathegorie" class="col-form-label">Cathegorie :</label>
                          <!--<select class="custom-select form-group mr-sm-2" #cathegoriedepense="ngModel" [(ngModel)]="currentdepenses.cathegoriedepense">
                          <label class="col-form-label">Cathegorie :</label>
                          <input type="text" class="form-control" name="cathegoriedepense" #cathegoriedepense="ngModel" [(ngModel)]="currentdepenses.cathegoriedepense "/>
                        </div>
                        <!--1<div class="form-group">
                          <label for="Categorie" class="col-form-label">Cathegorie :</label>
                          <select class="custom-select form-group mr-sm-2" #cathegoriedepense="ngModel" [(ngModel)]="currentdepenses.cathegoriedepense">
                            <option *ngFor = "let cathegorie of cathegories" [value]="cathegorie">{{cathegorie}}</option>
                          </select>-->
                          <input class="form-control" name="cathegoriedepense" #cathegoriedepense="ngModel" [(ngModel)]="depenseservice.selectedDepense.cathegoriedepense"/>
                        </div>
                        <div class="form-group">
                          <label class="col-form-label">Description: </label>
                          <input class="form-control" name="descriptiondepense" #descriptiondepense="ngModel" [(ngModel)]="depenseservice.selectedDepense.descriptiondepense"/>
                        </div>
                        <div class="form-group">
                          <!--<label class="col-form-label">Justificatif: </label>-->
                          <!--<input type="file" class="form-control" name="justificatifdepense" #justificatifdepense="ngModel" [(ngModel)]="currentdepenses.coverUrl" />-->
                        </div>

                        <div class="custom-control custom-checkbox récurents ">
                          <input type="checkbox" class="custom-control-input" data-toggle="collapse" href="#collapserecudep"
                                 role="button" aria-expanded="false" aria-controls="collapseExample"
                                 id="customCheckrecudep">
                          <label class="col-form-label" for="customCheckrecudep"> Définir comme dépense récurrent </label>
                          <div class="collapse" id="collapserecudep">
                            <div class="card card-body form-group">
                              <div class="form-group">
                                <select class="custom-select mr-sm-2 form-control" >
                                  <option *ngFor ="let repete of repetes" [value]="repete">{{repete}}</option>
                                </select>
                              </div>
                              <div class="form-group">
                                <select class="custom-select mr-sm-2 form-control">
                                  <option *ngFor ="let semaine of semaines" [value]="semaine">{{semaine}}</option>
                                </select>
                              </div>
                              <div class="form-group">
                                <select class="custom-select mr-sm-2">
                                  <option *ngFor = "let moi of mois" [value]="moi">{{moi}}</option>
                                </select>
                              </div>
                              <!--<div class="form-group" >
                                Du  <input formControlName="dateFrom" type="date" useValueAsDate />
                                au  <input formControlName="dateTo" type="date" useValueAsDate />
                              </div>-->
                              <div class="custom-control custom-checkbox alerte  ">
                                <input type="checkbox" class="custom-control-input" data-toggle="collapse" href="#collapsealertedep"
                                       role="button" aria-expanded="false" aria-controls="collapseExample"
                                       id="customCheckalertedep">
                                <label class="custom-control-label" for="customCheckalertedep">Ajouter un alerte :</label>
                                <div class="collapse" id="collapsealertedep">
                                  <div class="card card-body">
                                    <div class="form-group">
                                      <label class="" type=""> m'avertir avant : </label>
                                      <div class="row">.
                                        <div class="col-6">
                                          <select class="custom_menu">
                                            <option *ngFor ="let avert of averts" [value]="avert"> {{avert}}</option>
                                          </select>
                                        </div>
                                        <div class="col-6"> <label class="" type=""> jour(s) </label></div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-1 content-center">
                            <button type="submit" class="btn btn-primary bouton" [disabled]="!depensesForm.valid">modifier</button>
                          </div>
                          <div class="col-1 content-center">
                            <button type="reset" class="btn btn-secondary  bouton">annuler
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-light" (click)="c('Close click')">Annuler </button>
          </div>
        </ng-template>
